# NMFI Loan Type Architecture - Visual Guide

## ğŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER INTERFACE                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚  My Home Page    â”‚      â”‚ Other Loans      â”‚               â”‚
â”‚  â”‚                  â”‚      â”‚  Dashboard       â”‚               â”‚
â”‚  â”‚  [NMFI-Personal] â”‚      â”‚                  â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ [Personal Loan]  â”‚               â”‚
â”‚           â”‚                â”‚ [LAP Loan]       â”‚               â”‚
â”‚           â”‚                â”‚ [+ More...]      â”‚               â”‚
â”‚           â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚           â”‚                         â”‚                         â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                         â†“                                     â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚              â”‚  NMFI Dashboard      â”‚                         â”‚
â”‚              â”‚  (Parameterized)     â”‚                         â”‚
â”‚              â”‚                      â”‚                         â”‚
â”‚              â”‚  loanType: LoanType  â”‚ â† Passed as parameter   â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                         â”‚                                     â”‚
â”‚           Displays:     â”‚                                     â”‚
â”‚           â€¢ KYC Collection                                    â”‚
â”‚           â€¢ DDE Training                                      â”‚
â”‚           â€¢ Verification                                      â”‚
â”‚                         â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      STATE MANAGEMENT                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚                    â”‚  KycState    â”‚                            â”‚
â”‚                    â”‚  (Singleton) â”‚                            â”‚
â”‚                    â”‚              â”‚                            â”‚
â”‚                    â”‚  Properties: â”‚                            â”‚
â”‚                    â”‚  â€¢ isIndividual: bool                     â”‚
â”‚                    â”‚  â€¢ loanType: LoanType                     â”‚
â”‚                    â”‚  â€¢ loanTypeId: int                        â”‚
â”‚                    â”‚              â”‚                            â”‚
â”‚                    â”‚  Methods:    â”‚                            â”‚
â”‚                    â”‚  â€¢ setIndividualMode(loanType?)           â”‚
â”‚                    â”‚  â€¢ setLoanType(loanType)                  â”‚
â”‚                    â”‚  â€¢ setLoanTypeById(id)                    â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜                            â”‚
â”‚                               â”‚                                â”‚
â”‚                    Stores:    â”‚                                â”‚
â”‚                    â€¢ Current mode (Individual/Group)           â”‚
â”‚                    â€¢ Current loan type (Personal/LAP/...)      â”‚
â”‚                               â”‚                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CONFIGURATION                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚                   â”‚  LoanType Enum â”‚                           â”‚
â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                           â”‚
â”‚                   â”‚ personalLoan   â”‚ id: 1                     â”‚
â”‚                   â”‚ lap            â”‚ id: 2                     â”‚
â”‚                   â”‚ [+ more...]    â”‚ id: 3, 4, 5...            â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                            â”‚                                   â”‚
â”‚            Each provides:  â”‚                                   â”‚
â”‚            â€¢ id: int (for APIs)                                â”‚
â”‚            â€¢ title: String                                     â”‚
â”‚            â€¢ subtitle: String                                  â”‚
â”‚            â€¢ description: String                               â”‚
â”‚            â€¢ Helper methods                                    â”‚
â”‚                            â”‚                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      NETWORK LAYER                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚                    â”‚  DioClient   â”‚                            â”‚
â”‚                    â”‚              â”‚                            â”‚
â”‚                    â”‚  Globals:    â”‚                            â”‚
â”‚                    â”‚  â€¢ isIndividual = KycState().isIndividual â”‚
â”‚                    â”‚  â€¢ loanTypeId = KycState().loanTypeId     â”‚
â”‚                    â”‚              â”‚                            â”‚
â”‚                    â”‚  APIs:       â”‚                            â”‚
â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚                    â”‚  â”‚ KYC APIs                     â”‚         â”‚
â”‚                    â”‚  â”‚ â€¢ loadIndivisualSnapshot()   â”‚         â”‚
â”‚                    â”‚  â”‚ â€¢ createIndividualSnapshot() â”‚         â”‚
â”‚                    â”‚  â”‚ â€¢ getKycCategoryIndividual() â”‚         â”‚
â”‚                    â”‚  â”‚ â€¢ getKycQuestions()          â”‚         â”‚
â”‚                    â”‚  â”‚ â€¢ completeSnapshot()         â”‚         â”‚
â”‚                    â”‚  â”‚ â€¢ getKycStatus()             â”‚         â”‚
â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚                    â”‚  â”‚ DDE APIs                     â”‚         â”‚
â”‚                    â”‚  â”‚ â€¢ getDDEEligibleMembers()    â”‚         â”‚
â”‚                    â”‚  â”‚ â€¢ getAssignedDDEList()       â”‚         â”‚
â”‚                    â”‚  â”‚ â€¢ getDDEDetailsById()        â”‚         â”‚
â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚                    â”‚  â”‚ Verification APIs            â”‚         â”‚
â”‚                    â”‚  â”‚ â€¢ getVerificationEligible()  â”‚         â”‚
â”‚                    â”‚  â”‚ â€¢ getAssignedVerification()  â”‚         â”‚
â”‚                    â”‚  â”‚ â€¢ getVerificationDetails()   â”‚         â”‚
â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                    â”‚              â”‚                            â”‚
â”‚                    â”‚  All APIs automatically include:          â”‚
â”‚                    â”‚  â€¢ userId parameter                       â”‚
â”‚                    â”‚  â€¢ loanType parameter (from KycState)     â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜                            â”‚
â”‚                               â”‚                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BACKEND API                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  GET  /api/ClientApp/IndividualKyc/GetSnapshotList             â”‚
â”‚       ?UserId={uid}&loanType={loanTypeId}                      â”‚
â”‚                                                                 â”‚
â”‚  POST /api/ClientApp/IndividualKyc/CreateSnapshot              â”‚
â”‚       ?UserId={uid}&...&loanType={loanTypeId}                  â”‚
â”‚                                                                 â”‚
â”‚  POST /api/ClientApp/IndividualDDE/GetDDEEligibleMembers       â”‚
â”‚       ?userId={uid}&loanType={loanTypeId}                      â”‚
â”‚                                                                 â”‚
â”‚  POST /api/ClientApp/IndividualDDE/GetVerificationEligible     â”‚
â”‚       ?userId={uid}&loanType={loanTypeId}                      â”‚
â”‚                                                                 â”‚
â”‚  Backend filters/processes based on loanType parameter         â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow Diagram

### Scenario: User Opens LAP Dashboard and Creates Snapshot

```
â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚ USER â”‚ Clicks "NMFI - LAP" button
â””â”€â”€â”€â”¬â”€â”€â”˜
    â”‚
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Other Loans Dashboard             â”‚
â”‚                                   â”‚
â”‚ Navigator.push(                   â”‚
â”‚   NMFIDashboard(                  â”‚
â”‚     loanType: LoanType.lap  â† ID: 2
â”‚   )                               â”‚
â”‚ )                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NMFI Dashboard                    â”‚
â”‚                                   â”‚
â”‚ â€¢ Displays "LAP" title            â”‚
â”‚ â€¢ Shows LAP description           â”‚
â”‚ â€¢ User clicks "KYC Collection"    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Dashboard onTap()                 â”‚
â”‚                                   â”‚
â”‚ KycState().setIndividualMode(     â”‚
â”‚   loanType: widget.loanType â† LAP â”‚
â”‚ )                                 â”‚
â”‚                                   â”‚
â”‚ Navigate to ListSnapshot          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ KycState (Singleton)              â”‚
â”‚                                   â”‚
â”‚ Updates:                          â”‚
â”‚ â€¢ _isIndividual = true            â”‚
â”‚ â€¢ _loanType = LoanType.lap        â”‚
â”‚ â€¢ loanTypeId = 2                  â”‚
â”‚                                   â”‚
â”‚ Notifies listeners                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ListSnapshot                      â”‚
â”‚                                   â”‚
â”‚ Calls:                            â”‚
â”‚ _client.loadIndivisualSnapshot()  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DioClient                         â”‚
â”‚                                   â”‚
â”‚ Reads:                            â”‚
â”‚ final loanTypeId =                â”‚
â”‚   KycState().loanTypeId  â† Gets 2 â”‚
â”‚                                   â”‚
â”‚ Makes API call:                   â”‚
â”‚ GET /api/.../GetSnapshotList      â”‚
â”‚     ?UserId=123&loanType=2 â†â”€â”€â”€â”€â”€â”€â”¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BACKEND API                       â”‚
â”‚                                   â”‚
â”‚ Filters snapshots WHERE:          â”‚
â”‚ â€¢ UserId = 123                    â”‚
â”‚ â€¢ LoanType = 2  â† Only LAP data   â”‚
â”‚                                   â”‚
â”‚ Returns: LAP snapshots only       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ListSnapshot                      â”‚
â”‚                                   â”‚
â”‚ Displays: Only LAP snapshots      â”‚
â”‚                                   â”‚
â”‚ User creates new snapshot         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DioClient                         â”‚
â”‚                                   â”‚
â”‚ POST /api/.../CreateSnapshot      â”‚
â”‚     ?UserId=123&...&loanType=2    â”‚
â”‚                                   â”‚
â”‚ Backend saves with LoanType=2     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Key Principles

### 1. Single Source of Truth
```
KycState (Singleton)
    â†“
All components read from here
    â†“
Consistent state everywhere
```

### 2. Automatic Propagation
```
Set once in KycState
    â†“
Used automatically in all APIs
    â†“
No manual parameter passing needed
```

### 3. Type Safety
```
LoanType enum (not int)
    â†“
Compile-time checks
    â†“
No magic numbers
```

### 4. Parameterization over Duplication
```
One Dashboard + Parameter
    â†“
Multiple loan types supported
    â†“
Zero code duplication
```

---

## ğŸ“Š Component Dependencies

```
UI Layer (Dashboard, Screens)
    â†“ depends on
State Layer (KycState)
    â†“ depends on
Configuration (LoanType enum)
    â†“ used by
Network Layer (DioClient)
    â†“ calls
Backend API
```

---

## ğŸ” Data Isolation

```
Personal Loan (loanType=1)     LAP (loanType=2)
         â†“                             â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ User A  â”‚                   â”‚ User B  â”‚
    â”‚ Creates â”‚                   â”‚ Creates â”‚
    â”‚ Snapshotâ”‚                   â”‚ Snapshotâ”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚                             â”‚
         â†“                             â†“
  API: loanType=1              API: loanType=2
         â†“                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Personal Loan  â”‚            â”‚   LAP Data     â”‚
â”‚   Database     â”‚            â”‚   Database     â”‚
â”‚                â”‚            â”‚                â”‚
â”‚ Isolated       â”‚            â”‚ Isolated       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

No cross-contamination!
```

---

## ğŸš€ Extensibility Model

### Adding Loan Type 3 (e.g., Business Loan)

```
Step 1: Update Enum
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
enum LoanType {
  personalLoan(1),
  lap(2),
  businessLoan(3) â† Add this
}

Step 2: Add Entry Point
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
_buildLoanCard(
  title: 'Business Loan',
  onTap: () => Navigator.push(
    NMFIDashboard(loanType: LoanType.businessLoan)
  )
)

Step 3: Backend Support
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
API accepts loanType=3
Database stores loanType=3

RESULT: System automatically works!
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… Dashboard shows Business Loan branding
âœ… KycState tracks loanType=3
âœ… All APIs include loanType=3
âœ… Data isolated by loanType
âœ… No code changes needed elsewhere!
```

---

## ğŸ’¡ Benefits Visualization

### Before (Without This Solution)
```
Personal Loan Dashboard (1000 lines)
    â†“
LAP Dashboard (copy-paste 1000 lines)
    â†“
Business Loan Dashboard (copy-paste 1000 lines)
    â†“
Total: 3000+ lines, 3x maintenance effort
```

### After (With Hybrid Solution)
```
Single Parameterized Dashboard (1000 lines)
    +
LoanType Enum (50 lines)
    +
State Management (50 lines)
    â†“
Total: ~1100 lines, 1x maintenance effort
Supports unlimited loan types!
```

**Savings**: ~2000 lines, 3x less maintenance, infinite scalability!

---

## ğŸ“ Architecture Highlights

1. **Separation of Concerns**
   - UI (Dashboard)
   - State (KycState)
   - Configuration (LoanType)
   - Network (DioClient)

2. **DRY Principle**
   - Single dashboard
   - No duplication

3. **Open/Closed Principle**
   - Open for extension (new loan types)
   - Closed for modification (no dashboard changes)

4. **Type Safety**
   - Enum-based
   - Compile-time checks

5. **Maintainability**
   - One place to fix bugs
   - One place to add features

---

**This architecture ensures scalability, maintainability, and type safety!** ğŸ†

